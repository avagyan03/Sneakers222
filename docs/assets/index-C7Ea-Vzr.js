import{u as y,f as _,d as x,j as s,I as v,r as j}from"./index-CzcyRTkS.js";const b="_button_uuy3t_1 buttonReset",B="_icon_uuy3t_25",N="_item_uuy3t_39",g="_favoriteButton_uuy3t_69 _button_uuy3t_1 buttonReset",F="_favoriteButtonActive_uuy3t_83",A="_favorite_uuy3t_69 _icon_uuy3t_25",C="_img_uuy3t_123",w="_itemTitle_uuy3t_135 title",R="_wrapper_uuy3t_157",S="_span_uuy3t_179",T="_price_uuy3t_197",k="_plusButton_uuy3t_213 _button_uuy3t_1 buttonReset",E="_plusButtonActive_uuy3t_223",V="_plus_uuy3t_213 _icon_uuy3t_25",a={button:b,icon:B,item:N,favoriteButton:g,favoriteButtonActive:F,favorite:A,img:C,itemTitle:w,wrapper:R,span:S,price:T,plusButton:k,plusButtonActive:E,plus:V};function f(e){var n,o,t="";if(typeof e=="string"||typeof e=="number")t+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(o=f(e[n]))&&(t&&(t+=" "),t+=o)}else for(o in e)e[o]&&(t&&(t+=" "),t+=o);return t}function m(){for(var e,n,o=0,t="",i=arguments.length;o<i;o++)(e=arguments[o])&&(n=f(e))&&(t&&(t+=" "),t+=n);return t}const $=()=>{const{data:e,error:n,mutate:o}=y("http://localhost:3000/favorite",_),t=(e==null?void 0:e.length)>0?e:[];if(n||!e)return{addFavorite:()=>{},isFindFavorite:()=>{},favorites:[],error:n};const i=u=>{o(_(`http://localhost:3000/favorite/${u}`,{method:"DELETE"}),{populateCache:!1})},c=u=>{var l;return(l=t==null?void 0:t.find(h=>h.id===u))==null?void 0:l.id};return{addFavorite:u=>{if(c(u.id)){i(u.id);return}o(_("http://localhost:3000/favorite",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(u)}),{populateCache:!1})},isFindFavorite:c,favorites:t,error:n}};function L(e){const{addFavorite:n,isFindFavorite:o}=$(),{id:t,img:i,title:c,price:r}=e,{addProduct:u,isFindProduct:l}=x();return s.jsxs("article",{className:a.item,children:[s.jsx("button",{className:m(a.favoriteButton,o(t)===t&&a.favoriteButtonActive),onClick:()=>n({id:t,img:i,title:c,price:r}),children:s.jsx(v,{className:a.favorite,id:"favorite"})}),s.jsx("img",{className:a.img,src:i,alt:"sneakers"}),s.jsx("h3",{className:a.itemTitle,children:c}),s.jsxs("div",{className:a.wrapper,children:[s.jsx("span",{className:a.span,children:"Цена:"}),s.jsxs("span",{className:a.price,children:[r," руб."]}),s.jsx("button",{className:m(a.plusButton,l(t)===t&&a.plusButtonActive),onClick:()=>{u({id:t,img:i,title:c,price:r})},children:s.jsx(v,{className:a.plus,id:l(t)===t?"checked":"plus"})})]})]})}const P="_label_rlhsf_1",I="_icon_rlhsf_19",O="_input_rlhsf_29",p={label:P,icon:I,input:O},D=e=>{const{value:n,setValue:o}=e,t=i=>{o(i.target.value)};return s.jsxs("label",{className:p.label,children:[s.jsx(v,{className:p.icon,id:"search"}),s.jsx("input",{className:p.input,value:n,onChange:t,type:"text",placeholder:"Поиск..."})]})},J="_container_19cbe_1 container",W="_content_19cbe_11",q="_title_19cbe_29 title",z="_list_19cbe_43 listReset",d={container:J,content:W,title:q,list:z},H=e=>{const{products:n,children:o}=e,[t,i]=j.useState("");return s.jsx("section",{children:s.jsxs("div",{className:d.container,children:[s.jsxs("div",{className:d.content,children:[o,s.jsx(D,{value:t,setValue:i})]}),s.jsx("ul",{className:d.list,children:n.filter(c=>{var r;return(r=c.title)==null?void 0:r.toLowerCase().includes(t.toLowerCase())}).map((c,r)=>s.jsx("li",{children:s.jsx(L,{...c})},r))})]})})};export{H as C,$ as u};
